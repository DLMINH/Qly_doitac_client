<div class="clearfix"></div>
<div class="row" ng-controller="nationCtrl">
    <div class="col-md-12 col-sm-12 col-xs-12" ng-init="getAllContract(); getAllPartner()">
        <!-- <span ng-init="getContractOfUnit()" ng-if="role=='UNIT'"></span> -->
        <!-- <span ng-init="" ng-if="role=='ADMIN_UNIT'"></span> -->
        <!-- <div class="x_panel"> -->
        <div class="x_title">
            <!-- <h2>Thỏa thuận hợp tác</h2> -->
            <ul class="nav navbar-right panel_toolbox">
                <li class="dropdown">
                    <a class="dropdown-toggle cursor" data-toggle="dropdown" role="button" aria-expanded="false">
                            Thêm
                            <i class="fa fa-wrench"></i>
                        </a>
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a data-toggle="collapse" data-target="#add_partner" class="cursor"> Thêm Đối tác </a>
                        </li>
                        <li>
                            <a data-toggle="modal" data-target="#add_contract" class="cursor"> Thêm Thỏa thuận hợp tác </a>
                        </li>
                        <li>
                            <a data-toggle="modal" data-target="#insert_excel" class="cursor"> Thêm Thỏa thuận hợp tác từ excel</a>
                        </li>
                        <!-- <li>
                            <a data-toggle="collapse" data-target="#insert_excel_in" class="cursor"> Thêm Thỏa thuận hợp tác từ excel (trong nước)</a>
                        </li> -->
                        <li>
                            <a class="cursor" ng-click="exportData()"> Xuất Thỏa thuận hợp tác thành excel</a>
                        </li>
                        <li>
                            <a data-toggle="modal" data-target="#share_contract" class="cursor" ng-click="clearAngucompleteAltInput(findContract)"> Quản lý chia sẻ Thỏa thuận hợp tác </a>
                        </li>
                        <li>
                            <a class="cursor" data-toggle="collapse" data-target="#find_id"> Tìm mã </a>
                        </li>
                    </ul>
                </li>
            </ul>
            <div class="input-group pull-right">
                <input type="text" class="form-control" placeholder="Search for..." ng-model="search" style="border-radius:25px; border: 1px solid rgba(221,226,232,.49); box-shadow: inset 0 1px 0 rgba(0,0,0,.075);">
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <div class="alert alert-warning" ng-if="warning">
                <strong>{{warningMessage}}</strong>
            </div>
            <div class="alert alert-success" ng-if="success">
                <strong>{{successMessage}}</strong>
            </div>
            <div class="alert alert-danger" ng-if="danger">
                <strong>{{errorMessage}}</strong>
            </div>
            <!-- find_id -->
            <div class="collapse" id="find_id">
                <div>
                </div>
            </div>
            <!-- end find_id -->
            <!-- insert contract excel -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true" id="insert_excel">
                <div class="modal-dialog modal-lg" style="width: 90vw;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" id="close_modal_create"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Thêm Thỏa thuận hợp tác từ excel</h4>
                        </div>
                        <div class="modal-body">
                            <table>
                                <tr>
                                    <td>
                                        <input style="border-radius:25px; border: 1px solid rgba(221,226,232,.49); box-shadow: inset 0 1px 0 rgba(0,0,0,.075);" type="file" name="xlfile" id="xlfIn" ng-init="convertIn()">
                                    </td>
                                    <td>
                                        <button style="border-radius:25px; border: 1px solid rgba(221,226,232,.49); box-shadow: inset 0 1px 0 rgba(0,0,0,.075);" class="btn-primary" ng-click="checkExcelData()">Kiểm tra dữ liệu</button>
                                    </td>
                                    <td>
                                        <button style="border-radius:25px; border: 1px solid rgba(221,226,232,.49); box-shadow: inset 0 1px 0 rgba(0,0,0,.075);" class="btn-success" ng-click="importExcel()" ng-if="checkContractValue">Import</button>
                                    </td>
                                </tr>
                            </table>
                            <div class="table-responsive">
                                <table class="table table-striped jambo_table bulk_action" ng-if="excelTableIn != null">
                                    <thead>
                                        <tr class="headings">
                                            <th class="column-title">Tên cơ quan hợp tác</th>
                                            <th class="column-title">Quốc gia</th>
                                            <th class="column-title">Người ký đối tác</th>
                                            <th class="column-title">Nội dung hợp tác</th>
                                            <th class="column-title">Người ký VNU</th>
                                            <th class="column-title">Đơn vị theo dõi</th>
                                            <th class="column-title">Ngày ký</th>
                                            <th class="column-title">Ngày hết hiệu lực</th>
                                            <th class="column-title">Tự động renew</th>
                                            <th class="column-title">Hiệu quả hợp tác</th>
                                            <th class="column-title">Lưu ý</th>
                                            <th class="column-title">Biên bản ghi nhớ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="even pointer" ng-repeat="contract in excelTableIn" id="In_excel_{{contract.STT}}">
                                            <td id="In_partnerName_{{contract.STT}}">{{contract.partnerName}}</td>
                                            <td id="">{{contract.nation}}</td>
                                            <td id="In_contactName_{{contract.STT}}">{{contract.contactName}}</td>
                                            <td id="" ng-bind-html="contract.contentContract"></td>
                                            <!-- <td id="In_uetMan_{{contract.STT}}" ng-mouseleave="hideButton(contract.STT)">
                                                <p id="In_p_uetMan_{{contract.STT}}" ng-mouseover="showButton(contract.STT)">{{contract.uetMan}}</p>
                                            </td> -->
                                            <td id="In_uetMan_{{contract.STT}}" ng-bind-html="contract.uetMan">
                                            </td>
                                            <td id="In_unitName_{{contract.STT}}" ng-bind-html="contract.unitName">
                                            </td>
                                            <td id="">{{contract.startDate | date:'dd/MM/yyyy'}}</td>
                                            <td id="">{{contract.endDate | date:'dd/MM/yyyy'}}</td>
                                            <td id="">{{contract.renew}}</td>
                                            <td id="">{{contract.result}}</td>
                                            <td id="">{{contract.notice}}</td>
                                            <td id="">
                                                <label for="contract-excel-{{contract.STT}}" class="cursor">
                                                    <!-- <i class="fa fa-file-pdf-o"></i> -->
                                                    Chọn file
                                                </label>
                                                <input class="attach-file" type="file" name="input_file_pdf" id="contract-excel-{{contract.STT}}" accept=".doc, .docx, .pdf" ng-show="show">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" ng-click="createContract()">Tạo Thỏa thuận hợp tác</button> -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- add partner -->
            <div class="collapse" id="add_partner" ng-controller="partnerCtrl">
                <div class="alert alert-warning" ng-if="warning">
                    <strong>{{warningMessage}}</strong>
                </div>
                <div class="alert alert-success" ng-if="success">
                    <strong>{{successMessage}}</strong>
                </div>
                <div class="alert alert-danger" ng-if="danger">
                    <strong>{{errorMessage}}</strong>
                </div>
                <div>
                    <form>
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a data-toggle="collapse" data-target="#find_id" class="cursor"><i class="fa fa-chevron-up"></i></a>
                            </li>
                        </ul>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12"></label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <angucomplete-alt id="findpartnerId" placeholder="Tìm kiếm đối tác" pause="100" selected-object="selectedFindPartnerId" local-data="allPartner" search-fields="partnerName" title-field="partnerName" minlength="1" input-class="form-control" input-changed="clearData()" />
                                <!-- <select class="form-control" ng-model="input.partnerId" ng-change="getPartnerContact(input.partnerId)">
                                            <option ng-repeat="partner in allPartner" value="{{partner.id}}">
                                                {{partner.partnerName}}
                                            </option>
                                        </select> -->
                            </div>
                        </div>
                        <div class="form-group" ng-if="selectedFindPartnerId != null || selectedFindPartnerId != undefined">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">
                                <!-- Đơn vị theo dõi:  -->
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th> Tên đối tác </th>
                                            <th> Mã </th>
                                            <th> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <!-- <th scope="row">{{unitName.id}}</th> -->
                                            <td>{{selectedFindPartnerId.originalObject.partnerName}}</td>
                                            <td>
                                                {{selectedFindPartnerId.originalObject.id}}
                                            </td>
                                            <td>
                                                <input ng-model="selectedFindPartnerId.originalObject.id" ng-hide="selectedFindPartnerId.originalObject.id">
                                                <button style="border-radius:25px; border: 1px solid rgba(221,226,232,.49); box-shadow: inset 0 1px 0 rgba(0,0,0,.075);" ng-copy="selectedFindPartnerId.originalObject.id" class="btn">Copy</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <thead ng-if="selectedFindPartnerId.originalObject.partnerContacts.length != 0">
                                        <tr>
                                            <th> Đầu mối đối tác </th>
                                            <th> Mã </th>
                                            <th> </th>
                                        </tr>
                                    </thead>
                                    <tbody ng-if="selectedFindPartnerId.originalObject.partnerContacts.length != 0">
                                        <tr ng-repeat="partnerContact in selectedFindPartnerId.originalObject.partnerContacts">
                                            <!-- <th scope="row">{{unitName.id}}</th> -->
                                            <td>{{partnerContact.contactName}}</td>
                                            <td>
                                                {{partnerContact.id}}
                                            </td>
                                            <td>
                                                <input ng-model="partnerContact.id" ng-hide="partnerContact.id">
                                                <button style="border-radius:25px; border: 1px solid rgba(221,226,232,.49); box-shadow: inset 0 1px 0 rgba(0,0,0,.075);" ng-copy="partnerContact.id" class="btn">Copy</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">
                                <!-- Đơn vị theo dõi:  -->
                            </label>
                        </div>
                        <div ng-if="selectedFindPartnerId != null || selectedFindPartnerId != undefined">
                            <div class="form-group">
                                <!-- <label class="control-label col-md-3 col-sm-3 col-xs-12"></label> -->
                                <label class="control-label col-md-6 col-sm-6 col-xs-12 col-md-offset-3" data-toggle="collapse" data-target="#create_partner_contact" class="cursor">
                                    <i class="fa fa-plus"></i> Thêm người kí
                                </label>
                                <!-- <div class="col-md-6 col-sm-6 col-xs-12">
                                <angucomplete-alt id="findpartner" placeholder="Tìm kiếm đối tác" pause="100" selected-object="selectedFindPartnerId" local-data="allPartner" search-fields="partnerName" title-field="partnerName" minlength="1" input-class="form-control" />
                            </div> -->
                            </div>
                            <div class="form-horizontal form-label-left collapse" id="create_partner_contact">
                                <ul class="nav navbar-right panel_toolbox">
                                    <li><a data-toggle="collapse" data-target="#create_partner_contact" class="cursor"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                </ul>
                                <!-- <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Tên Đối tác: </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <select class="form-control" ng-model="input.partnerContact.partnerId">
                                        <option value="" selected="selected">
                                            -- Chọn Đối tác --
                                        </option>
                                        <option ng-repeat="partner in allPartner" value="{{partner.id}}">
                                            {{partner.partnerName}}
                                        </option>
                                    </select>
                                </div>
                            </div> -->
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Tên liên hệ: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.contactName" required />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Email: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.email" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Phone: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.phone" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Chức vụ: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.about" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Skype: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.skype" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-4">
                                        <button type="submit" class="btn btn-success" ng-click="createPartnerContact('contract', selectedFindPartnerId.originalObject.id)">Tạo</button>
                                    </div>
                                </div>
                                <div class="divider-dashed"></div>
                            </div>
                        </div>
                    </form>
                </div>
                <div id="step-1">
                    <!-- {{recentCreatedPartner}} -->
                    <form>
                        <div class="form-group" ng-if="recentCreatedPartner != null || recentCreatedPartner != undefined">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">
                                <!-- Đơn vị theo dõi:  -->
                            </label>
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th> Tên đối tác </th>
                                            <th> Mã </th>
                                            <th> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <!-- <th scope="row">{{unitName.id}}</th> -->
                                            <td>{{recentCreatedPartner.partnerName}}</td>
                                            <td>
                                                {{recentCreatedPartner.id}}
                                            </td>
                                            <td>
                                                <input ng-model="recentCreatedPartner.id" ng-hide="recentCreatedPartner.id">
                                                <button style="border-radius:25px; border: 1px solid rgba(221,226,232,.49); box-shadow: inset 0 1px 0 rgba(0,0,0,.075);" ng-copy="recentCreatedPartner.id" class="btn">Copy</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <thead ng-if="recentCreatedPartner.partnerContacts.length != 0">
                                        <tr>
                                            <th> Đầu mối đối tác </th>
                                            <th> Mã </th>
                                            <th> </th>
                                        </tr>
                                    </thead>
                                    <!-- <tbody ng-if="recentCreatedPartner.partnerContacts.length != 0">
                                        <tr>
                                            <td>{{recentCreatedPartner.partnerContacts[0].contactName}}</td>
                                            <td>
                                                {{recentCreatedPartner.partnerContacts[0].id}}
                                            </td>
                                            <td>
                                                <input ng-model="recentCreatedPartner.partnerContacts[0].id" ng-hide="recentCreatedPartner.partnerContacts[0].id">
                                                <button style="border-radius:25px; border: 1px solid rgba(221,226,232,.49); box-shadow: inset 0 1px 0 rgba(0,0,0,.075);" ng-copy="recentCreatedPartner.partnerContacts[0].id" class="btn">Copy</button>
                                            </td>
                                        </tr>
                                    </tbody> -->
                                    <tbody ng-if="recentCreatedPartner.partnerContacts.length != 0">
                                        <tr ng-repeat="partnerContact in recentCreatedPartner.partnerContacts">
                                            <td>{{partnerContact.contactName}}</td>
                                            <td>
                                                {{partnerContact.id}}
                                            </td>
                                            <td>
                                                <input ng-model="partnerContact.id" ng-hide="partnerContact.id">
                                                <button style="border-radius:25px; border: 1px solid rgba(221,226,232,.49); box-shadow: inset 0 1px 0 rgba(0,0,0,.075);" ng-copy="partnerContact.id" class="btn">Copy</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">
                                <!-- Đơn vị theo dõi:  -->
                            </label>
                        </div>
                        <div ng-if="recentCreatedPartner != null || recentCreatedPartner != undefined">
                            <div class="form-group">
                                <!-- <label class="control-label col-md-3 col-sm-3 col-xs-12"></label> -->
                                <label class="control-label col-md-6 col-sm-6 col-xs-12 col-md-offset-3" data-toggle="collapse" data-target="#create_partner_contact" class="cursor">
                                    <i class="fa fa-plus"></i> Thêm người kí
                                </label>
                                <!-- <div class="col-md-6 col-sm-6 col-xs-12">
                                <angucomplete-alt id="findpartner" placeholder="Tìm kiếm đối tác" pause="100" selected-object="selectedFindPartnerId" local-data="allPartner" search-fields="partnerName" title-field="partnerName" minlength="1" input-class="form-control" />
                            </div> -->
                            </div>
                            <div class="form-horizontal form-label-left collapse" id="create_partner_contact">
                                <ul class="nav navbar-right panel_toolbox">
                                    <li><a data-toggle="collapse" data-target="#create_partner_contact" class="cursor"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                </ul>
                                <!-- <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Tên Đối tác: </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <select class="form-control" ng-model="input.partnerContact.partnerId">
                                        <option value="" selected="selected">
                                            -- Chọn Đối tác --
                                        </option>
                                        <option ng-repeat="partner in allPartner" value="{{partner.id}}">
                                            {{partner.partnerName}}
                                        </option>
                                    </select>
                                </div>
                            </div> -->
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Tên liên hệ: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.contactName" required />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Email: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.email" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Phone: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.phone" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Chức vụ: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.about" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Skype: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="country" class="form-control col-md-10" ng-model="partnerContact.skype" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-4">
                                        <button type="submit" class="btn btn-success" ng-click="createPartnerContact('contract', recentCreatedPartner.id)">Tạo</button>
                                    </div>
                                </div>
                                <div class="divider-dashed"></div>
                            </div>
                        </div>
                    </form>
                    <form class="form-horizontal form-label-left">
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a data-toggle="collapse" data-target="#add_partner" class="cursor"><i class="fa fa-chevron-up"></i></a>
                            </li>
                        </ul>
                        <div class="form-group">
                            <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12"></label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <!-- <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" ng-model="input.phone"> -->
                                <h4 class="control-label col-md-7 col-xs-12">Thông tin cơ bản</h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Tên đối tác: <span class="required">*</span></label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input type="text" class="form-control col-md-10" ng-model="input.partnerName" ng-change="clearAngucompleteAltInput('findpartnerId')" required />
                            </div>
                        </div>
                        <div class="form-group" ng-init="getAllNation()">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Quốc Gia: <span class="required">*</span></label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <!-- <angucomplete-alt id="selectNation" placeholder="" pause="100" selected-object="selectedNation" local-data="allNations" search-fields="nationName" title-field="nationName" minlength="1" input-class="form-control" ng-model="input.nation" /> -->
                                <select class="form-control" ng-model="input.nationId">
                                    <option ng-repeat="nation in allNations" value="{{nation}}">
                                        {{nation.nationName}}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Giám đốc: </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input class="date-picker form-control col-md-7 col-xs-12" type="text" ng-model="input.director">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Ngày thành lập: </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input class="date-picker form-control col-md-7 col-xs-12" type="text" ng-model="input.birthday">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12">Số điện thoại: </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" ng-model="input.phone">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Địa chỉ: </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input class="date-picker form-control col-md-7 col-xs-12" type="text" ng-model="input.address">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Email: </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input class="date-picker form-control col-md-7 col-xs-12" type="text" ng-model="input.email">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">Website: </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input type="text" id="last-name" name="last-name" class="form-control col-md-7 col-xs-12" ng-model="input.website">
                            </div>
                        </div>
                        <div class="divider-dashed"></div>
                        <div class="form-group">
                            <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12"></label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <h4 class="control-label col-md-7 col-xs-12 cursor" data-toggle="collapse" data-target="#add_contact"> Thêm đầu mối đối tác</h4>
                            </div>
                        </div>
                        <div class="collapse" id="add_contact">
                            <ul class="nav navbar-right panel_toolbox">
                                <li><a data-toggle="collapse" data-target="#add_contact" class="cursor"><i class="fa fa-chevron-up"></i></a>
                                </li>
                            </ul>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Tên: <span class="required">*</span></label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.contactName" required />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Chức vụ: </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.about" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Email: </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.email" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Phone: </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.phone" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Skype: </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.skype" />
                                </div>
                            </div>
                        </div>
                        <div class="divider-dashed"></div>
                        <div class="form-group">
                            <div class="col-md-8">
                            </div>
                            <div class="col-md-4">
                                <button type="submit" class="btn btn-success" ng-click="createPartner()">Tạo</button>
                            </div>
                        </div>
                        <div class="divider-dashed"></div>
                    </form>
                </div>
            </div>
            <!-- end add partner -->
            <div class="table-responsive">
                <ul uib-pagination total-items="totalItems" ng-model="currentPage" max-size="noOfPages" items-per-page="entryLimit"></ul>
                <table class="table table-striped jambo_table bulk_action" id="tableExcel">
                    <thead>
                        <tr class="headings">
                            <!-- <th> -->
                            <!-- <input type="checkbox" id="check-all" class="flat"> -->
                            <!-- </th> -->
                            <th class="column-title">Tên cơ quan hợp tác</th>
                            <!-- <th class="column-title">Quốc Gia</th> -->
                            <th class="column-title">Người ký (VNU-UET)</th>
                            <th class="column-title">Người ký (Đối tác)</th>
                            <th class="column-title">Nội dung hợp tác chính</th>
                            <!-- <th class="column-title">Kinh phí</th> -->
                            <th class="column-title">Ngày ký</th>
                            <th class="column-title">Ngày hết hiệu lực</th>
                            <th class="column-title">Đơn vị theo dõi</th>
                            <!-- <th class="column-title">Hiệu quả hợp tác</th> -->
                            <!-- <th class="column-title">Lưu ý</th> -->
                            <th class="column-title">Biên bản</th>
                            <th class="column-title">Sửa</th>
                            <th class="column-title">Xóa</th>
                            <th class="column-title">
                                <i class="fa fa-chevron-down cursor" data-toggle="collapse" data-target="#export_xcel"></i>
                            </th>
                            <!-- <th class="column-title no-link last"><span class="nobr">Action</span> -->
                            <!-- </th> -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="even pointer" ng-repeat="contract in filtered = allContract | filter : search | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit">
                            <td class="cursor" data-toggle="modal" data-target="#show_partner_details" ng-click="editPartner(contract.partner, false, contract); click( 'information-tab')">
                                <!-- {{contract.partner.partnerName}} -->
                                <a>
                                        {{contract.partner.partnerName}}
                                    </a>
                            </td>
                            <!-- <td class="">{{contract.partner.nation.nationName}}</td> -->
                            <td>
                                <a ng-repeat="u in contract.uetMan">
                                    {{u.uetManName}}
                                    <br>
                                </a>
                            </td>
                            <td>{{contract.partnerContact.contactName}}
                                <br /> {{contract.partnerContact.about}}</td>
                            <td ng-bind-html="contract.contentContract"></td>
                            <!-- <td class="">{{contract.funding}}</td> -->
                            <td>{{contract.startDate | date:'dd/MM/yyyy'}}</td>
                            <td>{{contract.endDate | date:'dd/MM/yyyy'}}</td>
                            <td>{{contract.unitName}}
                                <a ng-repeat="u in contract.contractShares">
                                    {{u.unitName.unitName}}
                                    <br>
                                </a>
                            </td>
                            <!-- <td class="">{{contract.result}}</td> -->
                            <!-- <td class="">{{contract.notice}}</td> -->
                            <td class="">
                                <a ng-if="contract.attachFileAdd != null" class="cursor" data-toggle="modal" data-target="#view_file" class="" ng-click="getLinkFile(contract.attachFileAdd)">
                                        <i class="fa fa-file-pdf-o"></i>
                                    </a>
                            </td>
                            <td class="">
                                <a class="cursor" data-toggle="modal" data-target="#edit_contract" class="" ng-click="setEditContract(contract)">
                                        <i class="fa fa-edit"></i>
                                    </a>
                            </td>
                            <td class="" ng-click="confirmDelete(contract.id, contract.partner.partnerName)">
                                <a class="cursor" data-toggle="modal" data-target="#delete_contract"><i class="fa fa-trash"></i></a>
                            </td>
                            <td class="a-center">
                                <input type="checkbox" class="flat" name="table_records" ng-click="selectContract(contract); contract.checked=! contract.checked" ng-checked="contract.checked">
                            </td>
                        </tr>
                    </tbody>
                </table>
                <ul uib-pagination total-items="totalItems" ng-model="currentPage" max-size="noOfPages" items-per-page="entryLimit"></ul>
            </div>
            <div ui-view></div>
            <!-- modal doc -->
            <div class="modal fade" tabindex="-1" role="dialog" id="view_file">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-body">
                            <div style="text-align: center;">
                                <iframe src="{{modalFileLink}}" style="width:100%; height:85vh;" frameborder="0"></iframe>
                            </div>
                            <!-- {{modalFileLink}} -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- edit partner info -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true" id="edit_contract">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" id="close_modal_edit"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Chỉnh sửa Thỏa thuận hợp tác</h4>
                        </div>
                        <div class="modal-body">
                            <div class="alert alert-danger" ng-if="danger_edit">
                                <strong>{{errorMessage}}</strong>
                            </div>
                            <div class="alert alert-success" ng-if="successdelete_edit">
                                <strong>{{successMessage}}</strong>
                            </div>
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left">
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="last-name">Nội dung hợp tác: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <!-- <textarea class="form-control" rows="7" ng-model="editContractData.contentContract"></textarea> -->
                                        <ul class="nav navbar-right panel_toolbox">
                                            <li>
                                                <a data-toggle="collapse" data-target="#add_activity" class="cursor">
                                                    Thêm hoạt động hợp tác
                                                    <i class="fa fa-plus-circle"></i>
                                                </a>
                                            </li>
                                        </ul>
                                        <!-- <input  class="form-control col-md-7 col-xs-12" type="text" ng-model="editContractData.cooperateActivityValue"> -->
                                        <textarea id="add_activity" class="form-control collapse" rows="7" ng-model="editContractData.cooperateActivityValue"></textarea>
                                        <br />
                                        <table class="table table-striped">
                                            <tbody>
                                                <tr ng-repeat="activity in editContractData.cooperateActivity" id="tr_activity_{{activity.id}}">
                                                    <!-- <th scope="row">{{typeContract.id}}</th> -->
                                                    <td id="activity{{activity.id}}">{{activity.cooperateActivity}}</td>
                                                    <th>
                                                        <i id="edit_activity_{{activity.id}}" class="fa fa-edit cursor" ng-click="editActivity(activity.id); edit_activity=true"></i>
                                                        <i id="save_edit_activity_{{activity.id}}" class="fa fa-save cursor" ng-click="saveEditActivity(activity.id)" ng-if="edit_activity"></i>
                                                    </th>
                                                    <th><i class="fa fa-trash cursor" data-toggle="modal" data-target="#delete_activity" ng-click="confirmDelete(activity.id)"></i></th>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Kinh phí: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" ng-model="editContractData.funding">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Lưu ý: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" ng-model="editContractData.notice">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Kết quả hợp tác: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" ng-model="editContractData.result">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="last-name">Ngày ký: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="date" class="form-control col-md-7 col-xs-12" ng-model="editContractData.startDate" value="{{editContractData.startDate}}">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="last-name">Ngày hết hiệu lựu: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="date" class="form-control col-md-7 col-xs-12" ng-model="editContractData.endDate" value="{{editContractData.endDate}}">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12">
                                        <b>Biên bản ghi nhớ:</b>
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="file" class="form-control col-md-7 col-xs-12 attach-file" name="file" id="contract-edit" accept=".doc, .docx, .pdf">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
                            <button type="button" class="btn btn-primary" ng-click="editContract()">Lưu thay đổi</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end edit partner info -->
            <!-- them hop dong -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true" id="add_contract" ng-init="getAllUnitName(); getAllUetMan();">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" id="close_modal_create"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Thêm Thỏa thuận hợp tác</h4>
                        </div>
                        <div class="modal-body">
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left">
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12">Tên cơ quan hợp tác: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <angucomplete-alt id="findpartner" placeholder="Tìm kiếm đối tác" pause="100" selected-object="selectedPartner" local-data="allPartner" search-fields="partnerName" title-field="partnerName" minlength="1" input-class="form-control" />
                                        <!-- <select class="form-control" ng-model="input.partnerId" ng-change="getPartnerContact(input.partnerId)">
                                            <option ng-repeat="partner in allPartner" value="{{partner.id}}">
                                                {{partner.partnerName}}
                                            </option>
                                        </select> -->
                                    </div>
                                </div>
                                <!-- <div ng-if="selectedPartner.originalObject.id==0">
                                    PHẦN NÀY NGHIÊN CỨU THÊM ĐỂ TẠO PARTNER TRỰC TIẾP
                                    <div class="form-group">
                                        <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12"></label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <h4 class="control-label col-md-7 col-xs-12">Thông tin cơ bản</h4>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Tên đối tác: <span class="required">*</span></label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input type="text" class="form-control col-md-10" ng-model="input.partnerDTO.partnerName" required />
                                        </div>
                                    </div>
                                    <div class="form-group" ng-init="getAllNation()">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Quốc Gia: <span class="required">*</span></label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <select class="form-control" ng-model="input.partnerDTO.nationId">
                                                <option ng-repeat="nation in allNations" value="{{nation}}">
                                                    {{nation.nationName}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Giám đốc: </label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input class="date-picker form-control col-md-7 col-xs-12" type="text" ng-model="input.partnerDTO.director">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Ngày thành lập: </label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input class="date-picker form-control col-md-7 col-xs-12" type="text" ng-model="input.partnerDTO.birthday">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Số điện thoại: </label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" ng-model="input.partnerDTO.phone">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Địa chỉ: </label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input class="date-picker form-control col-md-7 col-xs-12" type="text" ng-model="input.partnerDTO.address">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Email: </label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input class="date-picker form-control col-md-7 col-xs-12" type="text" ng-model="input.partnerDTO.email">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12" for="last-name">Website: </label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input type="text" id="last-name" name="last-name" class="form-control col-md-7 col-xs-12" ng-model="input.partnerDTO.website">
                                        </div>
                                    </div>
                                    <div class="divider-dashed"></div>
                                    <div class="form-group">
                                        <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12"></label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <h4 class="control-label col-md-7 col-xs-12 cursor"> Đầu mối đối tác</h4>
                                        </div>
                                    </div>
                                    <div class="">
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Tên: <span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerDTO.partnerContact.contactName" required />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Chức vụ: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerDTO.partnerContact.about" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Email: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerDTO.partnerContact.email" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Phone: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerDTO.partnerContact.phone" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Skype: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerDTO.partnerContact.skype" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="divider-dashed"></div>
                                    <div class="form-group">
                                        <div class="col-md-8">
                                        </div>
                                        <div class="col-md-4">
                                            <button type="submit" class="btn btn-success" ng-click="createPartner()">Tạo</button>
                                        </div>
                                    </div>
                                    <div class="divider-dashed"></div>
                                </div> -->
                                <div class="form-group" ng-if="selectedPartner !=undefined && selectedPartner.originalObject.id !=0">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12">Người ký Thỏa thuận hợp tác (đối tác): </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <select class="form-control" ng-model="input.partnerContactId">
                                            <option ng-repeat="contact in selectedPartner.originalObject.partnerContacts" value="{{contact.id}}">
                                                {{contact.contactName}} - {{contact.email}}
                                            </option>
                                            <option value="-1"> - Chưa có - </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group" ng-if="input.partnerContactId=='-1'">
                                    <div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Tên: <span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.contactName" required />
                                            </div>
                                        </div>.partnerDTO
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Chức vụ: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.about" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Email: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.email" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Phone: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.phone" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Skype: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <input type="text" class="form-control col-md-10" ng-model="input.partnerContact.skype" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12">
                                        <!-- Đơn vị theo dõi:  -->
                                    </label>
                                    <div class="col-md-3 col-sm-3 col-xs-12">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr>
                                                    <th> Đơn vị theo dõi </th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="unitName in allUnit" class="cursor" ng-click="unitName.checked=! unitName.checked" id="unitName_share_contract_{{unitName.id}}" style="background-color: white;" ng-if="unitName.id != id">
                                                    <!-- <th scope="row">{{unitName.id}}</th> -->
                                                    <td>{{unitName.unitName}}</td>
                                                    <td class="a-center unitName_share_contract_{{unitName.id}}">
                                                        <i class="fa fa-check-circle-o" ng-if="unitName.checked==true"></i>
                                                        <i class="fa fa-circle-o" ng-if="unitName.checked !=true"></i>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-12">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr>
                                                    <th> Người ký (VNU-UET) </th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="uetMan in allUetMan" class="cursor" ng-click="uetMan.checked=! uetMan.checked" id="uetMan_share_contract_{{uetMan.id}}" style="background-color: white;">
                                                    <!-- <th scope="row">{{unitName.id}}</th> -->
                                                    <td>{{uetMan.uetManName}}</td>
                                                    <td class="a-center uetMan_share_contract_{{uetMan.id}}">
                                                        <i class="fa fa-check-circle-o" ng-if="uetMan.checked==true"></i>
                                                        <i class="fa fa-circle-o" ng-if="uetMan.checked !=true"></i>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <!-- <select class="form-control" ng-model="input.uetManId">
                                            <option ng-repeat="uetMan in allUetMan" value="{{uetMan.id}}">
                                                {{uetMan.uetManName}}
                                            </option>
                                        </select> -->
                                    </div>
                                </div>
                                <!-- <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12">Người ký Thỏa thuận hợp tác (VNU-UET): </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <table class="table table-striped">
                                            <tbody>
                                                <tr ng-repeat="uetMan in allUetMan" class="cursor" ng-click="uetMan.checked=! uetMan.checked" id="uetMan_share_contract_{{uetMan.id}}" style="background-color: white;">
                                                    <td>{{uetMan.uetManName}}</td>
                                                    <td class="a-center uetMan_share_contract_{{uetMan.id}}">
                                                        <i class="fa fa-check-circle-o" ng-if="uetMan.checked==true"></i>
                                                        <i class="fa fa-circle-o" ng-if="uetMan.checked !=true"></i>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div> -->
                                <!-- <div class="form-group">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Loại Thỏa thuận hợp tác: </label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <select class="form-control" ng-model="input.typeContractId">
                                                <option ng-repeat="typeContract in allTypeContract" value="{{typeContract.id}}">
                                                    {{typeContract.typeContract}}
                                                </option>
                                            </select>
                                        </div>
                                    </div> -->
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="last-name">Nội dung hợp tác chính: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <textarea class="form-control" rows="8" ng-model="input.contentContract"></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="last-name">Lưu ý: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <!-- <input type="text" class="form-control col-md-7 col-xs-12" ng-model="input.notice"> -->
                                        <textarea class="form-control" rows="8" ng-model="input.notice"></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="last-name">Giá trị HĐ: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" class="form-control col-md-7 col-xs-12" ng-model="input.funding">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="last-name">Ngày ký: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="date" class="form-control col-md-7 col-xs-12" ng-model="input.startDate">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="last-name">Ngày hết hiệu lựu: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="date" class="form-control col-md-7 col-xs-12" ng-model="input.endDate">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12">
                                        <b>Biên bản ghi nhớ:</b>
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="file" class="form-control col-md-7 col-xs-12 attach-fiale" name="file" id="contract-create" accept=".doc, .docx, .pdf">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" ng-click="createContract()">Tạo Thỏa thuận hợp tác</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end them hop dong -->
            <!-- confirm delete cotnract -->
            <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-hidden="true" id="delete_contract">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="close_modal_delete"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Bạn có chắc muốn xóa Thỏa thuận hợp tác của {{confirmDeleteName}}</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
                            <button type="button" class="btn btn-primary" ng-click="deleteContract(confirmDeleteId)">Xóa</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end confirm delete contract -->
            <!-- comfirm delete activity -->
            <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-hidden="true" id="delete_activity">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="close_modal_delete_activity"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Bạn có chắc muốn xóa hoạt động này?</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
                            <button type="button" class="btn btn-primary" ng-click="deleteActivity(confirmDeleteId)">Xóa</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end confirm delte activity -->
            <!-- partner contacts -->
            <div class="modal fade bs-example-modal-lg" role="dialog" aria-hidden="true" id="show_partner_details">
                <div class="modal-dialog" style="width: 80vw;">
                    <div class="modal-content" id="show_partner_details_modal_content">
                        <div class="modal-header">
                            <!-- <button type="button" class="close" data-dismiss="modal" id="close_modal_show_partner_details"><span aria-hidden="true">×</span>
                            </button> -->
                            <h4 class="modal-title">Thông tin {{Partner.partnerName}}</h4>
                        </div>
                        <div class="modal-body">
                            <div class="alert alert-danger" ng-if="danger_edit">
                                <strong>{{errorMessage}}</strong>
                            </div>
                            <div class="alert alert-success" ng-if="successdelete_edit">
                                <strong>{{successMessage}}</strong>
                            </div>
                            <div class="" role="tabpanel" data-example-id="togglable-tabs">
                                <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                                    <li role="presentation"><a data-target="#information" class="cursor" id="information-tab" role="tab" data-toggle="tab" aria-expanded="true">Thông tin đối tác</a>
                                    </li>
                                    <!-- <li role="presentation"><a class="cursor" data-target="#contract" role="tab" id="contract-tab" data-toggle="tab" aria-expanded="false">Thỏa thuận hợp tác</a>
                                    </li> -->
                                    <li role="presentation"><a ng-click="alert()" data-target="#activity" class="cursor" id="activity-tab" role="tab" data-toggle="tab" aria-expanded="true">Hoạt động hợp tác cụ thể<span class="badge bg-red" ng-if="editAnnualActivityCount> 0">{{editAnnualActivityCount}}</span>
                                                    </a>
                                    </li>
                                    <li role="presentation"><a data-target="#contact" class="cursor" id="contact-tab" role="tab" data-toggle="tab" aria-expanded="true">Liên hệ<span class="badge bg-red" ng-if="editContactCount > 0">{{editContactCount}}</span></a>
                                    </li>
                                </ul>
                                <div id="myTabContent" class="tab-content">
                                    <div role="tabpanel" class="tab-pane fade" id="information" aria-labelledby="information-tab">
                                        <div ui-view="information"></div>
                                    </div>
                                    <div role="tabpanel" class="tab-pane fade" id="contract" aria-labelledby="contract-tab">
                                        <div ui-view="contract"></div>
                                    </div>
                                    <div role="tabpanel" class="tab-pane fade" id="activity" aria-labelledby="activity-tab">
                                        <div ui-view="activity"></div>
                                    </div>
                                    <div role="tabpanel" class="tab-pane fade" id="contact" aria-labelledby="contact-tab">
                                        <div ui-view="contact"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="modal-footer"> -->
                        <!-- </div> -->
                    </div>
                </div>
            </div>
            <!-- end partner contacts -->
            <div class="modal fade bs-example-modal-sm delete-modal" tabindex="-1" role="dialog" aria-hidden="true" id="delete_partner">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" id="close_modal_delete_partner"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Bạn có chắc muốn xóa Đối tác này này?</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
                            <button type="button" class="btn btn-primary" ng-click="deletePartner(confirmDeleteId)">Xóa</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade bs-example-modal-sm delete-modal" tabindex="-1" role="dialog" aria-hidden="true" id="delete_partner_contact">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" ng-click="closeModal('delete_partner_contact')" id="close_modal_delete_partner_contact"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Bạn có chắc muốn xóa liên hệ {{confirmDeleteName}}?</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" ng-click="closeModal('delete_partner_contact')">Hủy</button>
                            <button type="button" class="btn btn-primary" ng-click="deletePartnerContact(confirmDeleteId)">Xóa</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-hidden="true" id="confirm_close_modal">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" ng-click="closeModal('confirm_close_modal')">×</span>
                            </button>
                            <h4 class="modal-title">Bạn có chắc muốn hủy bỏ những việc đang làm?</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" ng-click="closeModal('confirm_close_modal')">Không</button>
                            <button type="button" class="btn btn-primary" ng-click="closeModal('confirm_close_modal'); closeModal('show_partner_details');">Có</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade bs-example-modal-sm delete-modal" tabindex="-1" role="dialog" aria-hidden="false" id="delete_activity_">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" ng-click="closeModal('delete_activity_')" id="close_modal_delete"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Bạn có chắc muốn xóa hoạt động {{confirmDeleteName}}</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" ng-click="closeModal('delete_activity_')">Hủy</button>
                            <button type="button" class="btn btn-primary" ng-click="deleteAnnualActivity(confirmDeleteId, false)">Xóa</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- confirm delete cotnract -->
            <!-- <div class="modal fade bs-example-modal-sm delete-modal" tabindex="-1" role="dialog" aria-hidden="true" id="delete_contract">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" ng-click="close('delete_contract')" id="close_modal_delete"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Bạn có chắc muốn xóa Thỏa thuận hợp tác này</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" ng-click="close('delete_contract')">Hủy</button>
                            <button type="button" class="btn btn-primary" ng-click="deleteContract(); close('delete_contract');">Xóa</button>
                        </div>
                    </div>
                </div>
            </div> -->
            <!-- end confirm delete contract -->
            <!-- share contract -->
            <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true" id="share_contract">
                <div class="modal-dialog modal-lg" style="width:60vw;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="close_modal_delete"><span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Quản lý chia sẻ Thỏa thuận hợp tác</h4>
                        </div>
                        <!-- <div class="modal-body"> -->
                        <div class="col-sm-12" style="height: 70vh;">
                            <div class="alert alert-danger" ng-if="danger_edit">
                                <strong>{{errorMessage}}</strong>
                            </div>
                            <div class="alert alert-success" ng-if="successdelete_edit">
                                <strong>{{successMessage}}</strong>
                            </div>
                            <br>
                            <div class="col-sm-12">
                                <div class="col-sm-2">
                                </div>
                                <div class="col-sm-8">
                                    <angucomplete-alt id="findContract" placeholder="Tìm kiếm Thỏa thuận hợp tác" pause="100" selected-object="selectedContract" local-data="allContract" search-fields="partner.partnerName" title-field="partner.partnerName" minlength="1" input-class="form-control" />
                                </div>
                                <div class="col-sm-2">
                                </div>
                            </div>
                            <div class="col-sm-12" ng-show="selectedContract != null || selectedContract != undefined">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <!-- <th>#</th> -->
                                            <th>Nội dung</th>
                                            <th>Người ký (VNU-UET)</th>
                                            <th>Người ký (Đối tác)</th>
                                            <th>Ngày ký</th>
                                            <th>Ngày hết hiệu lực</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <!-- <th scope="row">{{unitName.id}}</th> -->
                                            <td ng-bind-html="selectedContract.originalObject.contentContract"></td>
                                            <td>{{selectedContract.originalObject.uetMan.uetManName}}</td>
                                            <td>{{selectedContract.originalObject.partnerContact.contactName}}</td>
                                            <td id="">{{selectedContract.originalObject.startDate | date:'dd/MM/yyyy'}}</td>
                                            <td id="">{{selectedContract.originalObject.endDate | date:'dd/MM/yyyy'}}</td>
                                            <td>
                                                <i class="fa fa-check-circle-o" ng-if="unitName.checked == true"></i>
                                                <i class="fa fa-circle-o" ng-if="unitName.checked != true"></i>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-sm-12">
                                <div class="col-sm-3">
                                </div>
                                <div class="col-sm-6" ng-if="selectedContract != null || selectedContract != undefined">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <!-- <th>#</th> -->
                                                <th> Chia sẻ với đơn vị khác </th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="unitName in allUnit" class="cursor" ng-click="unitName.checked = !unitName.checked" id="unitName_share_contract_{{unitName.id}}" ng-if="unitName.id != id">
                                                <!-- <th scope="row">{{unitName.id}}</th> -->
                                                <td>{{unitName.unitName}}</td>
                                                <td class="a-center unitName_share_contract_{{unitName.id}}">
                                                    <i class="fa fa-check-circle-o" ng-if="unitName.checked == true"></i>
                                                    <i class="fa fa-circle-o" ng-if="unitName.checked != true"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-sm-3">
                                </div>
                            </div>
                        </div>
                        <!-- </div> -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
                            <button type="button" class="btn btn-primary" ng-click="shareContract(selectedContract.originalObject.id, allUnit)">Lưu thay đổi</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end share contract -->
        </div>
        <!-- </div> -->
    </div>
</div>